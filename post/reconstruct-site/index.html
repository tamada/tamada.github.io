<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>Haruaki Tamada  | Reconstruct site by Hugo</title>
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">

    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="generator" content="Hugo 0.42.2" />
    
    
      <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
    

    
    
      <link href="https://tamada.github.io/dist/css/app.ab4b67a3ea25990fa8279f3b7ef08b61.css" rel="stylesheet">
    


    
      
    

    

    <meta property="og:title" content="Reconstruct site by Hugo" />
<meta property="og:description" content="Hugoを使ってサイトを再構築してみた． 以前は Jekyll を使っていたが，テーマの変更がものすごくしんどくて嫌になっていた． Hugo だと，テーマの変更は Jekyll よ" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://tamada.github.io/post/reconstruct-site/" />



<meta property="article:published_time" content="2017-08-26T17:51:42&#43;09:00"/>

<meta property="article:modified_time" content="2017-08-26T17:51:42&#43;09:00"/>











<meta itemprop="name" content="Reconstruct site by Hugo">
<meta itemprop="description" content="Hugoを使ってサイトを再構築してみた． 以前は Jekyll を使っていたが，テーマの変更がものすごくしんどくて嫌になっていた． Hugo だと，テーマの変更は Jekyll よ">


<meta itemprop="datePublished" content="2017-08-26T17:51:42&#43;09:00" />
<meta itemprop="dateModified" content="2017-08-26T17:51:42&#43;09:00" />
<meta itemprop="wordCount" content="787">



<meta itemprop="keywords" content="" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Reconstruct site by Hugo"/>
<meta name="twitter:description" content="Hugoを使ってサイトを再構築してみた． 以前は Jekyll を使っていたが，テーマの変更がものすごくしんどくて嫌になっていた． Hugo だと，テーマの変更は Jekyll よ"/>

  </head>

  <body class="ma0 avenir bg-near-white">

    
   
  

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="https://tamada.github.io/" class="f3 fw2 hover-white no-underline white-90 dib">
      Haruaki Tamada
    </a>
    <div class="flex-l items-center">
      
        <ul class="pl0 mr3">
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/about/" title="About Me page">
              About Me
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/post/" title="Articles page">
              Articles
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/lectures/" title="Lectures page">
              Lectures
            </a>
          </li>
          
        </ul>
      
      



  <a href="https://twitter.com/tama5" class="link-transition twitter link dib z-999 pt3 pt0-l mr2" title="Twitter link">
    <svg  height="32px"  style="enable-background:new 0 0 67 67;" versin="1.1" viewBox="0 0 64 64" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <path stroke-width="0" fill="gray" d="M60 16 L54 17 L58 12 L51 14 C42 4 28 15 32 24 C16 24 8 12 8 12 C8 12 2 21 12 28 L6 26 C6 32 10 36 17 38 L10 38 C14 46 21 46 21 46 C21 46 15 51 4 51 C37 67 57 37 54 21 Z" />
</svg>

  </a>




  <a href="https://github.com/tamada" class="link-transition github link dib z-999 pt3 pt0-l mr3" title="GitHub link">
    <svg  height="32px"  style="enable-background:new 0 0 67 67;" versin="1.1" viewBox="0 0 64 64" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <path stroke-width="0" style="fill-rule:evenodd;clip-rule:evenodd;" fill="gray" d="M32 0 C14 0 0 14 0 32 0 53 19 62 22 62 24 62 24 61 24 60 L24 55 C17 57 14 53 13 50 13 50 13 49 11 47 10 46 6 44 10 44 13 44 15 48 15 48 18 52 22 51 24 50 24 48 26 46 26 46 18 45 12 42 12 31 12 27 13 24 15 22 15 22 13 18 15 13 15 13 20 13 24 17 27 15 37 15 40 17 44 13 49 13 49 13 51 20 49 22 49 22 51 24 52 27 52 31 52 42 45 45 38 46 39 47 40 49 40 52 L40 60 C40 61 40 62 42 62 45 62 64 53 64 32 64 14 50 0 32 0 Z" />
</svg>

  </a>


    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
  <article class="flex-l flex-wrap justify-between mw8 center">

    <header class="mt4 w-100">
      <p class="f6 b helvetica tracked">
          
        ARTICLES
      </p>
      <h1 class="f1 athelas mb1">Reconstruct site by Hugo</h1>
      
      <time class="f6 mv4 dib tracked" datetime="2017-08-26T17:51:42&#43;09:00">August 26, 2017</time>
    </header>

    <main class="nested-copy-line-height lh-copy serif f4 nested-links nested-img mid-gray pr4-l w-two-thirds-l">

<p><a href="https://gohugo.io/">Hugo</a>を使ってサイトを再構築してみた．
以前は <a href="https://jekyllrb.com/">Jekyll</a> を使っていたが，テーマの変更がものすごくしんどくて嫌になっていた．</p>

<p>Hugo だと，テーマの変更は Jekyll よりも簡単のように感じる．
このような記事に何を書けば良いのか，特に研究室のページとの使い分けはよくわからないが，のんびりと続けてみる．</p>

<p>なお，画像は全て <a href="https://visualhunt.com/">Visual Hunt</a> から取得した．</p>

<h2 id="theme-の扱い方">theme の扱い方．</h2>

<p><a href="https://themes.gohugo.io/">Hugo のテーマ</a>の多くは GitHub で配布されているようだ．
このページも Git で管理している．
さて，テーマをcloneして <code>/themes</code> に保存するわけだが，それをそのままこのページのリポジトリに保存するのは気持ち悪い．
ということで，submodule を使ってみる．</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ cd themes
$ git submodule add https://github.com/.... # &lt;- 適当なテーマ</code></pre></div>

<p>これでテーマの内容を丸ごとリポジトリにコミットする必要がなくなる．</p>

<h3 id="参考">参考</h3>

<ul>
<li><a href="http://qiita.com/sotarok/items/0d525e568a6088f6f6bb">Git submodule の基礎</a></li>
</ul>

<h2 id="gh-pages">gh-pages</h2>

<p>GitHub Pages では，<code>gh-pages</code> というブランチにpushした内容がWebページとして反映される．
Hugo だと <code>public</code> ディレクトリの内容が <code>gh-pages</code> になっていれば Webページが更新されるようになる．
いちいち別のブランチに切り替えて．．．とやるのも面倒なので，git の worktree を利用する．
worktree とは，1つのサブディレクトリを別のブランチとして扱うものである．</p>

<h3 id="準備">準備</h3>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ git checkout --orphan gh-pages <span style="color:#75715e"># &lt;-- 空の gh-pages ブランチを作成し，移動する．
</span><span style="color:#75715e"></span>$ git rm archetypes config.toml content data layouts static themes .gitmodules README.md <span style="color:#75715e"># &lt;- public以外を削除する．
</span><span style="color:#75715e"></span>$ mv public/* . <span style="color:#75715e"># &lt;- public の中身をトップディレクトリに移動する．
</span><span style="color:#75715e"></span>$ rmdir public  <span style="color:#75715e"># &lt;- public の中身がなくなったので，public ディレクトリを削除する．
</span><span style="color:#75715e"></span>$ git add .
$ git commit -m <span style="color:#e6db74">&#34;some comment&#34;</span>
$ git checkout master
$ git worktree public gh-pages <span style="color:#75715e"># &lt;- publicディレクトリをgh-pagesとして扱う．
</span><span style="color:#75715e"></span>$ git submodule update # &lt;- 上で themes 以下を削除したのでもう一度 clone する．</code></pre></div>

<p>ここまでやれば <code>public</code> ディレクトリが <code>gh-pages</code> ブランチであると認識されるようになる．
以降は，<code>gh-pages</code> へのコミットであれば，<code>public</code>ディレクトリで，
それ以外のブランチでの操作であれば，トップディレクトリで行えば良い．</p>
<ul class="pa0">
  
</ul>
<div class="mt6">
        
      </div>
    </main>

    <aside class="w-30-l mt6-l">




</aside>

  </article>

    </main>
    <footer class="bg-near-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="https://tamada.github.io/" >
    &copy; 2008-2018 Haruaki Tamada
  </a>
  



  <a href="https://twitter.com/tama5" class="link-transition twitter link dib z-999 pt3 pt0-l mr2" title="Twitter link">
    <svg  height="32px"  style="enable-background:new 0 0 67 67;" versin="1.1" viewBox="0 0 64 64" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <path stroke-width="0" fill="gray" d="M60 16 L54 17 L58 12 L51 14 C42 4 28 15 32 24 C16 24 8 12 8 12 C8 12 2 21 12 28 L6 26 C6 32 10 36 17 38 L10 38 C14 46 21 46 21 46 C21 46 15 51 4 51 C37 67 57 37 54 21 Z" />
</svg>

  </a>




  <a href="https://github.com/tamada" class="link-transition github link dib z-999 pt3 pt0-l mr3" title="GitHub link">
    <svg  height="32px"  style="enable-background:new 0 0 67 67;" versin="1.1" viewBox="0 0 64 64" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <path stroke-width="0" style="fill-rule:evenodd;clip-rule:evenodd;" fill="gray" d="M32 0 C14 0 0 14 0 32 0 53 19 62 22 62 24 62 24 61 24 60 L24 55 C17 57 14 53 13 50 13 50 13 49 11 47 10 46 6 44 10 44 13 44 15 48 15 48 18 52 22 51 24 50 24 48 26 46 26 46 18 45 12 42 12 31 12 27 13 24 15 22 15 22 13 18 15 13 15 13 20 13 24 17 27 15 37 15 40 17 44 13 49 13 49 13 51 20 49 22 49 22 51 24 52 27 52 31 52 42 45 45 38 46 39 47 40 49 40 52 L40 60 C40 61 40 62 42 62 45 62 64 53 64 32 64 14 50 0 32 0 Z" />
</svg>

  </a>


  </div>
</footer>

    

  <script src="https://tamada.github.io/dist/js/app.3fc0f988d21662902933.js"></script>


  </body>
</html>
